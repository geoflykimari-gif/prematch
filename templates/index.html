<!DOCTYPE html>
<html>
<head>
<title>Upcoming Matches</title>
<style>
body {
    font-family: Arial, sans-serif;
    background: #eee;
    margin: 0;
    padding: 0;
}
header {
    background: #222;
    color: #fff;
    padding: 15px;
    text-align: center;
    font-size: 22px;
}
.match {
    background: #fff;
    margin: 10px;
    padding: 12px;
    border-radius: 8px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    cursor: pointer;
}
.team {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 16px;
}
.team img {
    width: 40px;
    height: 40px;
}
.row {
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.pred {
    text-align: center;
    width: 100px;
    font-size: 14px;
}
.pct {
    font-weight: bold;
}
h2 {
    margin: 20px 10px 5px 10px;
    padding: 6px 10px;
    background: #222;
    color: #fff;
    border-radius: 4px;
}

/* Mini progress bars */
.prog-container {
    background: #ddd;
    border-radius: 5px;
    width: 100%;
    height: 12px;
    margin-top: 2px;
    overflow: hidden;
}
.prog-bar-home { background: #4caf50; height: 100%; }
.prog-bar-draw { background: #999; height: 100%; }
.prog-bar-away { background: #f44336; height: 100%; }
</style>
</head>
<body>
<header>Upcoming Matches</header>
<div id="list"></div>

<script>
async function loadMatches() {
    const res = await fetch("/api/upcoming");
    const matches = await res.json();
    const box = document.getElementById("list");
    box.innerHTML = "";
    let currentLeague = "";

    matches.forEach(m => {
        if (m.league !== currentLeague) {
            currentLeague = m.league;
            const h2 = document.createElement("h2");
            h2.textContent = currentLeague;
            box.appendChild(h2);
        }

        const div = document.createElement("div");
        div.className = "match";
        div.onclick = () => {
            window.location.href = `/match?home=${encodeURIComponent(m.home)}&away=${encodeURIComponent(m.away)}&date=${m.date}`;
        };

        div.innerHTML = `
        <div class="row">
            <div class="team"><img src="${m.home_logo}"> ${m.home}</div>
            <div>${m.date} ${m.time}</div>
            <div class="team"><img src="${m.away_logo}"> ${m.away}</div>
        </div>
        <div class="row" style="margin-top:10px;">
            <div class="pred">
                H: <span class="pct">${m.prediction.home_win}%</span>
                <div class="prog-container">
                    <div class="prog-bar-home" style="width:${m.prediction.home_win}%"></div>
                </div>
            </div>
            <div class="pred">
                D: <span class="pct">${m.prediction.draw}%</span>
                <div class="prog-container">
                    <div class="prog-bar-draw" style="width:${m.prediction.draw}%"></div>
                </div>
            </div>
            <div class="pred">
                A: <span class="pct">${m.prediction.away_win}%</span>
                <div class="prog-container">
                    <div class="prog-bar-away" style="width:${m.prediction.away_win}%"></div>
                </div>
            </div>
        </div>
        `;
        box.appendChild(div);
    });
}
loadMatches();
</script>
</body>
</html>
